# SpockChef 项目需求文档深度整理方案

根据您的反馈，我作为产品经理，将重新梳理并完善 [PROJECT_STANDARDS.md](file:///d:/Devlopment/LiteProgram/Private%20chef/PROJECT_STANDARDS.md)，确保逻辑严密、模块清晰。

## 1. 核心模块架构梳理
将系统划分为三个互不干扰但逻辑关联的维度：
*   **全量菜单库 (Global Repository)**：独立后台，负责菜品的“生老病死”。
*   **饭桌业务流 (Table Workflow)**：核心业务线，包含筹备、投票、锁定、结算四个阶段。
*   **互动与工具 (Interactive Tools)**：点菜选择器、实时人气榜、账单计算器。

## 2. 需求文档更新要点

### 🟢 状态机与权限锁 (State & Permissions)
*   **精细化定义**：明确每个状态（Planning/Voting/Locked/Archived）下，主人和客人分别“能做什么”和“禁止做什么”。
*   **数据隔离**：确保全量菜单库的修改不影响已处于“投票中”或“已锁定”状态的饭桌快照。

### 🟢 菜单管理深度解耦 (Menu Decoupling)
*   **管理端 (E)**：增加“菜品版本/快照”概念，防止主人修改库中菜品时导致旧饭桌数据显示异常。
*   **点菜端 (D)**：明确“从库中选菜”到“本场候选名单”的数据流转逻辑。

### 🟢 账单结算细化 (Billing Details)
*   **逻辑闭环**：补充“总价录入 -> 参与人数校验 -> 人均计算 -> 账单导出”的完整链路。
*   **异常处理**：定义零人数、零金额等边缘场景的 UI 提示。

### 🟢 访客体验优化 (Guest UX)
*   **Session 持久化**：详细描述 24 小时内身份自动关联的技术规范。
*   **偏好采集**：将“忌口/偏好”作为加入饭桌的可选前置步骤，并能在主人端汇总展示。

---

## 3. 验收标准 (Acceptance Criteria)
*   [ ] 全量菜单库支持 100+ 菜品的流畅检索与批量管理。
*   [ ] 饭桌在 `Voting` 状态下，主人端“编辑”按钮置灰并弹出锁定提示。
*   [ ] 账单模块在人均为零时有明确的友好提示。

**确认以上梳理逻辑后，我将立即为您重写完整的需求规范文档。**

# SpockChef 前后端完整实现方案

根据 [PROJECT_STANDARDS.md](file:///d:/Devlopment/LiteProgram/Private%20chef/PROJECT_STANDARDS.md) 和 [UI_PREVIEW.html](file:///d:/Devlopment/LiteProgram/Private%20chef/UI_PREVIEW.html) 的设计，我将分阶段实现全量功能。

## 1. 后端实现 (NestJS + Prisma)

### 核心模块开发
- **Dishes 模块**：实现全量菜单库的 CRUD。
    - 支持关键字搜索、分类过滤（HOT_DISH, COLD_DISH 等）。
    - 批量删除与导出接口。
- **Tables 模块**：实现饭桌生命周期管理。
    - **状态流转控制**：Planning -> Voting -> Locked -> Archived。
    - **权限校验**：在 Voting 状态下锁定菜单编辑，在 Locked 状态下锁定投票。
    - **候选菜单关联**：实现从全量库挑选菜品到特定饭桌的逻辑。
- **Guests & Votes 模块**：
    - **匿名加入**：通过 `sessionId` 标记客人，支持记录忌口偏好。
    - **点赞投票**：实现“一人一票”的点赞/取消逻辑。
    - **人气榜单**：聚合计算各菜品的实时点赞数。
- **Billing 模块**：根据总金额和参与 Session 人数自动计算 AA 分摊。

## 2. 前端实现 (Vue 3 + TS + Tailwind)

### 基础架构与组件
- **路由配置**：
    - `/admin/menu`：全量菜单库管理。
    - `/host/tables`：饭桌列表与创建。
    - `/table/:id`：饭桌详情（主人端/客人端自适应）。
- **通用组件库**：基于琥珀金主题色和 16px 圆角封装 `ChefButton`, `ChefCard`, `ChefInput`, `HeatMap` 等组件。

### 核心页面开发
- **菜单库管理页**：实现表格化管理、搜索、分类切换及批量操作栏。
- **主人筹备页**：实现饭桌信息编辑、候选菜品挑选（弹出式点菜器）。
- **客人投票页**：实现极简的“想吃”互动界面，展示实时人气进度条。
- **账单结算弹窗**：实现金额录入与 AA 计算结果展示。

## 3. 任务拆解与进度管理

### 第一阶段：后端基础与数据库 (P0)
1.  完善 Prisma 模型并执行迁移。
2.  实现全量菜单库的 CRUD 接口。

### 第二阶段：饭桌流转与点菜逻辑 (P0)
1.  实现饭桌创建与候选菜品挑选接口。
2.  实现状态切换（Planning -> Voting）的权限锁逻辑。

### 第三阶段：前端页面与交互 (P1)
1.  搭建前端路由与基础布局。
2.  实现菜单管理与点菜器 UI。
3.  实现客人端投票与实时人气榜。

### 第四阶段：账单与收尾 (P2)
1.  实现账单结算逻辑与 UI。
2.  全局视觉一致性检查。

---

**请确认以上实施方案。确认后我将首先从后端数据库迁移和核心接口开发开始。**

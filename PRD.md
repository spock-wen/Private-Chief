# SpockChef 私厨助手 - 产品需求文档 (PRD)

## 1. 执行摘要 (Executive Summary)
**目标**：为家庭宴请、私人聚会提供全流程数字化助手。解决传统聚餐中“点菜难、口味不一、账单混乱”的痛点，营造从筹备到结算的专业、私密且温馨的体验。

## 2. 核心角色与权限 (Roles & Permissions)

### 2.1 角色定义 (Identity)
系统基于浏览器 **Session ID** 识别唯一身份，无需账号注册。

1. **主人 (Host)**：
   - 饭桌的发起者（创建者）。
   - 拥有该饭桌的 **管理权**。
   - 身份标识：`hostSessionId` 与当前 `sessionId` 一致。
   - 同时具备“客人”的所有互动功能。

2. **客人 (Participant/Guest)**：
   - 通过分享链接进入饭桌的参与者。
   - 拥有该饭桌的 **互动权**。
   - 身份标识：`sessionId` 已在饭桌的访客名单中登记。

### 2.2 权限矩阵 (Permission Matrix)

| 功能模块 | 主人 (Host) | 客人 (Participant) | 状态限制 |
| :--- | :---: | :---: | :--- |
| **基础信息查看** | √ | √ | 无 |
| **候选菜单管理 (增删)** | √ | × | 仅限 Planning 阶段 |
| **饭桌状态推进** | √ | × | 顺序流转 |
| **投票 (点赞/取消)** | √ | √ | 仅限 Voting 阶段 |
| **录入/修改账单** | √ | × | Locked/Archived 阶段 |
| **查看账单/AA 结果** | √ | √ | Locked/Archived 阶段 |
| **管理所有饭桌列表** | 仅查看自己创建的 | × | 无 |

## 3. 核心业务流程 (Refined Flow)

### 3.1 身份准入逻辑
- **主人创建**：主人发起饭桌时，系统自动将其 `sessionId` 记录为 `hostSessionId`，并同步创建一条 `Guest` 记录。
- **客人加入**：新访客进入饭桌详情页时，系统校验其 `sessionId`：
  - 若已在访客表：直接进入互动界面。
  - 若不在访客表：弹出“加入围炉”弹窗，强制登记昵称后方可进入。

### 3.2 饭桌可见性
- **我的饭桌 (Dashboard)**：仅展示当前用户作为“主人”创建的饭桌列表。
- **详情页 (Deep Link)**：任何持有链接的人在完成登记后均可查看并参与互动。

## 3. 功能模块详情

### 3.1 全量菜单管理 (Admin)
- **卡片式管理**：瀑布流或网格布局，展示高清菜品图。
- **智能标签**：支持按口味（酸甜、辛辣）、耗时、食材分类。
- **批量操作**：快速导入/导出及删除。

### 3.2 饭桌生命周期 (Table Lifecycle)
- **Planning (筹备中)**：主人专属，自由增删候选菜品。
- **Voting (投票中)**：客人可看可投，主人可看不可改菜单。
- **Locked (已锁定)**：菜单确定，停止投票，准备开餐。
- **Archived (已结束)**：展示最终账单与历史回顾。

### 3.3 交互亮点 (UX Highlights)
- **实时热度**：菜品点赞后有明显的视觉动效及进度反馈。
- **匿名友好**：客人无需注册，输入昵称即可快速加入，保护私密性。

## 4. 成功指标 (Success Metrics)
- **单场活跃度**：平均每位客人投票数 > 3。
- **决策效率**：从发起饭桌到锁定菜单的时间缩短至 2 小时内。
- **用户满意度**：账单分摊透明度反馈 4.8/5.0。

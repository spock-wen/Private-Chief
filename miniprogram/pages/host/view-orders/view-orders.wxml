<!--pages/host/view-orders/view-orders.wxml-->
<view class="container">
  <view class="header-actions">
    <button class="btn-secondary" bindtap="shareTable">åˆ†äº«é¥­æ¡Œ</button>
  </view>

  <view class="view-mode-tabs">
    <view class="tab-item {{viewMode === 'by-person' ? 'active' : ''}}" bindtap="switchViewMode" data-mode="by-person">
      æŒ‰äººæŸ¥çœ‹
    </view>
    <view class="tab-item {{viewMode === 'by-dish' ? 'active' : ''}}" bindtap="switchViewMode" data-mode="by-dish">
      æŒ‰èœå“æŸ¥çœ‹
    </view>
  </view>

  <!-- æŒ‰äººæŸ¥çœ‹ -->
  <view class="view-content" wx:if="{{viewMode === 'by-person'}}">
    <view class="person-section" wx:for="{{ordersByPerson}}" wx:key="userId">
      <view class="person-header">
        <text class="person-name">{{item.userName || 'æœªçŸ¥ç”¨æˆ·'}}</text>
        <text class="person-count">{{item.totalQuantity}} ä»½</text>
      </view>
      <view class="order-list">
        <view class="order-item" wx:for="{{item.orders}}" wx:key="id" wx:for-item="order">
          <view class="order-info">
            <text class="dish-name">{{order.dishName}}</text>
            <text class="order-note" wx:if="{{order.note}}">å¤‡æ³¨ï¼š{{order.note}}</text>
          </view>
          <text class="order-quantity">Ã—{{order.quantity}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æŒ‰èœå“æŸ¥çœ‹ -->
  <view class="view-content" wx:if="{{viewMode === 'by-dish'}}">
    <view class="dish-section" wx:for="{{ordersByDish}}" wx:key="dishId">
      <view class="dish-header">
        <text class="dish-name">{{item.dishName}}</text>
        <text class="dish-count">å…± {{item.totalQuantity}} ä»½</text>
      </view>
      <view class="order-list">
        <view class="order-item" wx:for="{{item.orders}}" wx:key="id" wx:for-item="order">
          <text class="user-name">{{order.userName}}</text>
          <text class="order-quantity">Ã—{{order.quantity}}</text>
          <text class="order-note" wx:if="{{order.note}}">({{order.note}})</text>
        </view>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:if="{{ordersByPerson.length === 0 && ordersByDish.length === 0}}">
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-text">æš‚æ— ç‚¹èœè®°å½•</text>
  </view>

  <view class="bottom-actions">
    <button class="btn-secondary" bindtap="goToMenuManage">ç®¡ç†èœå•</button>
    <button class="btn-primary" bindtap="confirmMenu">ç¡®è®¤èœå•</button>
  </view>
</view>



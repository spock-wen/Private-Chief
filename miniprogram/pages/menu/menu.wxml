<!--pages/menu/menu.wxml-->
<view class="container">
  <!-- åˆ†ç±»Tab -->
  <view class="category-tabs">
    <view 
      class="tab-item {{currentCategory === 'all' ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="all"
    >
      å…¨éƒ¨
    </view>
    <view 
      class="tab-item {{currentCategory === item ? 'active' : ''}}"
      wx:for="{{categories}}"
      wx:key="*this"
      bindtap="switchCategory"
      data-category="{{item}}"
    >
      {{item}}
    </view>
  </view>

  <!-- ç®¡ç†æŒ‰é’®ï¼ˆä»…ä¸»äººï¼‰ -->
  <view wx:if="{{isHost}}" class="manage-bar">
    <button class="btn-secondary" bindtap="manageMenu">ç®¡ç†èœå•</button>
  </view>

  <!-- èœå“åˆ—è¡¨ -->
  <view wx:if="{{filteredDishes.length > 0}}" class="dish-list">
    <view 
      class="dish-card card" 
      wx:for="{{filteredDishes}}" 
      wx:key="id"
    >
      <view class="dish-image-wrapper" wx:if="{{item.image || item.thumbnail}}">
        <image 
          class="dish-image" 
          src="{{item.thumbnail || item.image}}" 
          mode="aspectFill"
          lazy-load
        />
      </view>
      <view class="dish-content">
        <view class="dish-header">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-status status-{{item.status}}">
            {{item.status === 'recommended' ? 'æ¨è' : item.status === 'soldout' ? 'å”®ç½„' : ''}}
          </text>
        </view>
        <text class="dish-category">{{item.category}}</text>
        <text class="dish-description" wx:if="{{item.description}}">{{item.description}}</text>
        <view class="dish-footer" wx:if="{{item.price}}">
          <text class="dish-price">Â¥{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{filteredDishes.length === 0 && !loading}}" class="empty-state">
    <text class="empty-icon">ğŸ½ï¸</text>
    <text class="empty-text">æš‚æ— èœå“</text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>


# 快速开始指南

本指南将帮助你快速搭建和运行家庭厨房点菜小程序。

## 前置要求

1. **微信开发者工具**（最新版本）
   - 下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

2. **小程序账号**
   - 注册地址：https://mp.weixin.qq.com/
   - 获取 AppID

3. **开通云开发**
   - 登录微信公众平台
   - 进入"开发" -> "开发管理" -> "云开发"
   - 开通云开发服务（免费配额足够测试使用）
   - 创建云开发环境，获取环境ID

## 安装步骤

### 1. 配置项目

#### 1.1 配置 AppID

编辑 `project.config.json`：
```json
{
  "appid": "你的小程序AppID"
}
```

#### 1.2 配置云开发环境ID

编辑 `app.js`：
```javascript
wx.cloud.init({
  env: '你的云开发环境ID', // 替换这里
  traceUser: true,
});
```

### 2. 创建数据库集合

在微信开发者工具中：

1. 点击工具栏的"云开发"按钮
2. 进入"数据库"面板
3. 点击"+"创建集合，依次创建：
   - `tables`（饭桌）
   - `menus`（菜单）
   - `orders`（订单）

4. 设置集合权限（建议）：
   - 打开集合
   - 点击"权限设置"
   - 选择"仅创建者可读写，所有人可读"

### 3. 部署云函数

在微信开发者工具中：

1. 右键点击 `cloudfunctions` 文件夹
2. 选择"上传并部署：云端安装依赖"
3. 等待部署完成

或者逐个部署每个云函数：

1. 右键点击每个云函数文件夹（如 `cloudfunctions/createTable`）
2. 选择"上传并部署：云端安装依赖"
3. 等待部署完成

**需要部署的云函数：**
- createTable
- addDish
- orderDish
- confirmMenu
- deleteDish
- updateDish
- deleteOrder
- updateOrder

### 4. 准备图片资源

在 `images` 目录下放置以下图片（或使用占位图）：

- `logo.png` - Logo图片
- `home.png` / `home-active.png` - TabBar首页图标
- `history.png` / `history-active.png` - TabBar历史图标
- `default-dish.png` - 默认菜品图片

**临时方案：** 如果没有图片，可以先使用简单的占位图，或者修改 `app.json` 暂时移除 TabBar。

### 5. 编译运行

1. 在微信开发者工具中点击"编译"
2. 等待编译完成
3. 在模拟器中测试功能

## 测试流程

### 测试主人端

1. **创建饭桌**
   - 进入首页，点击"创建饭桌"
   - 填写饭桌信息
   - 点击"创建饭桌"

2. **添加菜品**
   - 进入菜单管理页面
   - 点击"添加菜品"
   - 填写菜品信息并保存

3. **分享饭桌**
   - 点击"分享饭桌"
   - 复制链接或生成二维码

4. **查看点菜**
   - 点击"查看点菜情况"
   - 切换"按人查看"和"按菜品查看"

5. **确认菜单**
   - 点击"确认菜单"
   - 导出菜单

### 测试客人端

1. **进入饭桌**
   - 使用链接或二维码进入饭桌
   - 输入昵称

2. **点菜**
   - 浏览菜单
   - 点击"+"增加数量
   - 查看我的点菜

3. **查看全部**
   - 点击"查看全部"
   - 查看所有人的点菜

## 常见问题

### 1. 云函数调用失败

**原因：** 云函数未部署或环境ID配置错误

**解决：**
- 检查云函数是否已部署
- 检查 `app.js` 中的环境ID是否正确
- 查看云开发控制台的云函数日志

### 2. 数据库查询失败

**原因：** 数据库集合未创建或权限设置错误

**解决：**
- 检查数据库集合是否已创建
- 检查集合权限设置
- 查看云开发控制台的数据库日志

### 3. TabBar图标不显示

**原因：** 图片文件不存在

**解决：**
- 检查 `images` 目录下是否有对应的图标文件
- 或者暂时移除 TabBar 配置

### 4. 页面跳转失败

**原因：** 页面路径错误或页面文件缺失

**解决：**
- 检查 `app.json` 中的页面路径是否正确
- 检查页面文件是否都存在（.js, .wxml, .wxss）

### 5. 数据不显示

**原因：** 数据库权限或查询条件错误

**解决：**
- 检查数据库权限设置
- 检查查询条件是否正确
- 查看控制台错误信息

## 开发建议

1. **真机调试**
   - 开发过程中建议使用真机预览和调试
   - 某些功能（如扫码）只能在真机上测试

2. **数据初始化**
   - 可以先手动在数据库中创建一些测试数据
   - 方便快速测试功能

3. **错误处理**
   - 注意查看控制台的错误信息
   - 使用微信开发者工具的调试功能

4. **性能优化**
   - 图片资源建议使用云存储
   - 大数据量时考虑分页加载

## 下一步

- 阅读 [README.md](./README.md) 了解完整功能
- 阅读 [DATABASE.md](./DATABASE.md) 了解数据库设计
- 根据需要自定义功能和样式

## 技术支持

如遇到问题，请：
1. 查看微信开发者工具的控制台错误信息
2. 查看云开发控制台的日志
3. 参考微信小程序官方文档：https://developers.weixin.qq.com/miniprogram/dev/framework/



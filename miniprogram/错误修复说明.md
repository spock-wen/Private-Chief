# 错误修复说明

## 修复的错误

### 1. `Cannot read properties of undefined (reading 'setChanges')`

**原因：** 在模板中直接访问可能为 `null` 的对象属性，导致小程序框架在初始化时出错。

**修复：**
- 在模板中添加了 `wx:if` 条件判断，确保只在对象存在时才渲染
- 将初始值从 `null` 改为 `{}`（空对象），避免访问 `null` 的属性

**修复的文件：**
- `pages/guest/menu-view/menu-view.wxml` - 添加 `wx:if="{{tableInfo}}"` 保护
- `pages/guest/menu-view/menu-view.js` - `tableInfo: null` → `tableInfo: {}`
- `pages/host/confirm-menu/confirm-menu.wxml` - 添加 `wx:if` 保护
- `pages/host/confirm-menu/confirm-menu.js` - `tableInfo: null` → `tableInfo: {}`
- `pages/host/menu-manage/menu-manage.js` - `tableInfo: null` → `tableInfo: {}`
- `pages/guest/enter-table/enter-table.wxml` - 添加 `userInfo` 空值检查
- `pages/guest/enter-table/enter-table.js` - `userInfo: {}` → `userInfo: null`

### 2. `Component is not found in path "wx://not-found"`

**可能原因：**
- 这是微信开发者工具的内部错误提示
- 可能是某个页面或组件的路径配置问题

**检查项：**
- ✅ 已检查 `app.json`，没有配置不存在的组件
- ✅ 已检查所有页面路径，都是正确的
- ✅ 所有页面文件（.js, .wxml, .wxss）都存在

**解决方案：**
1. 清除缓存并重新编译
2. 如果仍然出现，可能是开发者工具的问题，可以尝试重启开发者工具

## 修复后的数据初始化

所有页面现在都使用安全的初始值：

```javascript
data: {
  tableInfo: {},  // 空对象而不是 null
  dishes: [],
  filteredDishes: [],
  // ...
}
```

所有模板都添加了安全检查：

```xml
<view wx:if="{{tableInfo}}">
  <text>{{tableInfo.name}}</text>
</view>
```

## 测试建议

1. **清除缓存**
   - 在微信开发者工具中点击"清缓存"
   - 选择"清除文件缓存"
   - 重新编译

2. **检查控制台**
   - 查看是否还有错误
   - 如果 `wx://not-found` 错误仍然存在，可能是开发者工具的问题

3. **逐步测试**
   - 先测试首页是否能正常打开
   - 再测试其他页面

## 如果错误仍然存在

如果 `wx://not-found` 错误仍然存在，可以尝试：

1. 重启微信开发者工具
2. 更新微信开发者工具到最新版本
3. 检查是否有其他页面文件缺失
4. 查看具体的错误堆栈，找到是哪个页面报错

